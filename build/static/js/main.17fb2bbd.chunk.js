(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,t,a){},38:function(e,t,a){e.exports=a(71)},47:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},69:function(e,t,a){},70:function(e,t,a){},71:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),l=a(17),s=a.n(l),o=(a(24),a(4)),c=a(1);const m=e=>({allState:Object(c.a)({},e)});var i=a(7);a(47);var p=Object(o.b)(e=>({userState:Object(c.a)({},e.userState)}),null)(function(e){const t=e.userState.user.userName;return n.a.createElement("nav",{className:"navbar navbar-expand-lg navbar-dark bg-dark"},n.a.createElement("div",{className:"container"},n.a.createElement(i.b,{className:"navbar-brand",to:"/"},n.a.createElement("img",{style:{borderRadius:"50%",backgroundColor:"white",marginRight:"10px"},src:"https://robohash.org/siddhida",height:"40px",alt:""}),"Imgur"),n.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent","aria-controls":"navbarSupportedContent","aria-expanded":"false","aria-label":"Toggle navigation"},n.a.createElement("span",{className:"navbar-toggler-icon"})),n.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent"},n.a.createElement("ul",{className:"navbar-nav ml-auto"},t?n.a.createElement(n.a.Fragment,null,n.a.createElement("li",{className:"nav-item dropdown"},n.a.createElement(i.b,{className:"nav-link dropdown-toggle",to:"/",id:"navbarDropdown",role:"button","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false"},t),n.a.createElement("div",{className:"dropdown-menu","aria-labelledby":"navbarDropdown"},n.a.createElement(i.b,{className:"dropdown-item",to:"/upload-post"},"Upload Post"),n.a.createElement(i.b,{className:"dropdown-item",to:"/my-posts"},"My Posts"),n.a.createElement(i.b,{className:"dropdown-item",to:"/favourites"},"Favourites"),n.a.createElement("div",{className:"dropdown-divider"}),n.a.createElement(i.b,{onClick:()=>e.dispatch({type:"LOGOUT"}),className:"dropdown-item",to:""},"Logout")))):n.a.createElement(n.a.Fragment,null,n.a.createElement("li",{className:"nav-item"},n.a.createElement(i.b,{className:"nav-link",to:"/login"},"Login")),n.a.createElement("li",{className:"nav-item"},n.a.createElement(i.b,{className:"nav-link ",to:"/register"},"Register")))))))});a(49),a(50);var u=function(e){const t=e.post,a=t.image,r=t.imagetitle,l=t.description;return n.a.createElement(n.a.Fragment,null,n.a.createElement("img",{className:"card-img-top",height:200,src:a,alt:"Card img cap"}),n.a.createElement("div",{className:"card-body"},n.a.createElement("h5",{className:"card-title"},r),n.a.createElement("p",{className:"card-text"},l)))},d=a(5),b=a.n(d),E=a(12),v=a(35);const g=a.n(v).a.create({baseURL:"https://mighty-reaches-93229.herokuapp.com"}),h=()=>(function(){var e=Object(E.a)(b.a.mark(function e(t){return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}})();var f=Object(o.b)(e=>({allState:Object(c.a)({},e)}),{SET_TIMELINE:()=>(function(){var e=Object(E.a)(b.a.mark(function e(t){var a,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("/allPublicPosts");case 3:return a=e.sent,r=a.data,console.log("data",r),e.abrupt("return",t({type:"SET_TIMELINE",payload:r}));case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}},e,null,[[0,9]])}));return function(t){return e.apply(this,arguments)}})(),ADD_TO_FAVOURITES:h})(function(e){const t=e.SET_TIMELINE;return Object(r.useEffect)(()=>{t()},[t]),console.log(e),n.a.createElement("div",{className:"Timeline"},e.allState.timelineState.allPosts.length?e.allState.timelineState.allPosts.map(e=>n.a.createElement("div",{key:e.id,className:"card mt-5",style:{width:"200px"}},n.a.createElement(u,{post:e}),n.a.createElement(i.b,{onClick:()=>h(e.id),to:"",className:"btn btn-primary"},"Add to favourites"))):n.a.createElement("h1",null,"Loading..."))}),N=a(3),O=a(15);var y=Object(o.b)(null,{LOGIN_USER:e=>(function(){var t=Object(E.a)(b.a.mark(function t(a){var r,n;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,g.post("/login",{useremail:e.state.email,password:e.state.password});case 3:r=t.sent,n=r.data,console.log(n),a({type:"LOGIN_USER",payload:{userName:n.msg,token:n.token.token,posts:n.token.posts,favourites:n.token.favourites}}),localStorage.setItem("token",JSON.stringify(n.token)),e.push("/timeline"),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(0),console.log(t.t0);case 14:case"end":return t.stop()}},t,null,[[0,11]])}));return function(e){return t.apply(this,arguments)}})()})(function(e){const t=e.LOGIN_USER,a=e.history.push,l=Object(r.useState)({email:"",password:""}),s=Object(O.a)(l,2),o=s[0],m=s[1];return n.a.createElement("div",{className:"Login col-md-6 mx-auto mt-5 "},n.a.createElement("h1",{className:"text-center"},"Login"),n.a.createElement("form",{onSubmit:e=>{e.preventDefault(),""!==o.email&&""!==o.password&&t({state:o,push:a})}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),n.a.createElement("input",{onChange:e=>m(Object(c.a)(Object(c.a)({},o),{},{email:e.target.value})),type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),n.a.createElement("input",{onChange:e=>m(Object(c.a)(Object(c.a)({},o),{},{password:e.target.value})),type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password"})),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Login")))});var w=Object(o.b)(null,{REGISTER_USER:e=>(function(){var t=Object(E.a)(b.a.mark(function t(a){var r,n;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,console.log("first"),t.next=4,g.post("/register",{useremail:e.state.email,username:e.state.userName,password:e.state.password});case 4:r=t.sent,n=r.data,console.log(n),e.push("/login"),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),console.log("three"),console.log(t.t0);case 14:case"end":return t.stop()}},t,null,[[0,10]])}));return function(e){return t.apply(this,arguments)}})()})(function(e){const t=e.REGISTER_USER,a=e.history.push,l=Object(r.useState)({userName:"",email:"",password:""}),s=Object(O.a)(l,2),o=s[0],m=s[1];return n.a.createElement("div",{className:"Register col-md-6 mx-auto mt-5 "},n.a.createElement("h1",{className:"text-center"},"Register"),n.a.createElement("form",{onSubmit:e=>{e.preventDefault(),console.log(o),""!==o.userName&&""!==o.email&&""!==o.password&&t({state:o,push:a})}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"exampleInputUser"},"User Name"),n.a.createElement("input",{onChange:e=>m(Object(c.a)(Object(c.a)({},o),{},{userName:e.target.value})),type:"text",className:"form-control",id:"exampleInputUser","aria-describedby":"emailHelp",placeholder:"Enter username"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"exampleInputEmail1"},"Email address"),n.a.createElement("input",{onChange:e=>m(Object(c.a)(Object(c.a)({},o),{},{email:e.target.value})),type:"email",className:"form-control",id:"exampleInputEmail1","aria-describedby":"emailHelp",placeholder:"Enter email"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"exampleInputPassword1"},"Password"),n.a.createElement("input",{onChange:e=>m(Object(c.a)(Object(c.a)({},o),{},{password:e.target.value})),type:"password",className:"form-control",id:"exampleInputPassword1",placeholder:"Password"})),n.a.createElement("button",{onClick:()=>{""!==o.email&&""!==o.password&&t(o)},type:"submit",className:"btn btn-primary"},"Register")))});var j=Object(o.b)(null,{UPLOAD_POST:e=>(function(){var t=Object(E.a)(b.a.mark(function t(a){var r,n,l;return b.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,(r=new FormData).append("image",e.image),r.append("imagetitle",e.title),r.append("description",e.description),r.append("privacystatus",e.isPublic),t.next=8,fetch("https://mighty-reaches-93229.herokuapp.com/addData",{method:"POST",headers:{"Content-Type":"application/json"},body:r});case 8:return n=t.sent,t.next=11,n.json();case 11:l=t.sent,console.log(l),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(0),console.log(t.t0);case 18:case"end":return t.stop()}},t,null,[[0,15]])}));return function(e){return t.apply(this,arguments)}})()})(function(e){const t=e.history.push,a=e.UPLOAD_POST,l=Object(r.useState)({image:"",title:"",description:"",isPublic:""}),s=Object(O.a)(l,2),o=s[0],m=s[1];return n.a.createElement("div",{className:"UploadPost col-md-6 mx-auto mt-5 "},n.a.createElement("h1",{className:"text-center"},"Upload Post"),n.a.createElement("form",{onSubmit:e=>{console.log("first"),e.preventDefault(),console.log("second"),console.log(o),""!==o.title&&""!==o.description&&""!==o.image&&""!==o.isPublic&&(console.log("three"),a({state:o,push:t}),console.log("four"))}},n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"image"},"Image"),n.a.createElement("input",{onChange:e=>m(Object(c.a)(Object(c.a)({},o),{},{image:e.target.value})),value:o.image,type:"file",multiple:!0,className:"form-control",id:"image","aria-describedby":"emailHelp",placeholder:"Enter email"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"title"},"Title"),n.a.createElement("input",{onChange:e=>m(Object(c.a)(Object(c.a)({},o),{},{title:e.target.value})),value:o.title,type:"title",className:"form-control",id:"title","aria-describedby":"emailHelp",placeholder:"Enter Title"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",{htmlFor:"description"},"Description"),n.a.createElement("input",{onChange:e=>m(Object(c.a)(Object(c.a)({},o),{},{description:e.target.value})),value:o.description,type:"text",className:"form-control",id:"description",placeholder:"Enter Description"})),n.a.createElement("div",{className:"form-group"},n.a.createElement("label",null,"Privacy status : "),n.a.createElement("select",{onChange:e=>m(Object(c.a)(Object(c.a)({},o),{},{isPublic:e.target.value})),value:o.isPublic,id:"exampleInputPassword1"},n.a.createElement("option",{value:"",disabled:!0},"select privacy"),n.a.createElement("option",{value:"public"},"Public"),n.a.createElement("option",{value:"private"},"Private"))),n.a.createElement("button",{type:"submit",className:"btn btn-primary"},"Submit")))});a(69);var S=Object(o.b)(m,null)(function(e){const t=e.allState.userState.favourites;return console.log(e.allState),n.a.createElement("div",{className:"Favourites"},t.length?t.map(e=>n.a.createElement("div",{key:e._id,className:"card mt-5",style:{width:"200px"}},n.a.createElement(u,{post:e}))):n.a.createElement("h1",{className:"text-center mt-5"},"No Favourites"))});a(70);var x=Object(o.b)(m,{SET_MY_POSTS:()=>(function(){var e=Object(E.a)(b.a.mark(function e(t){var a,r;return b.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,g("");case 3:return a=e.sent,r=a.data,e.abrupt("return",t({type:"SET_MY_POSTS",paylaod:r}));case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case"end":return e.stop()}},e,null,[[0,8]])}));return function(t){return e.apply(this,arguments)}})()})(function(e){const t=e.allState.userState.myPosts;return console.log("myPosts",t),console.log("props",e),n.a.createElement("div",{className:"MyPosts"},t.length?t.map(e=>n.a.createElement("div",{key:e._id,className:"card mt-5",style:{width:"200px"}},n.a.createElement(u,{post:e}))):n.a.createElement("h1",{className:"text-center mt-5"},"No Posts Uploaded "))});var P=function(e){return console.log(e),n.a.createElement("div",{className:"App"},n.a.createElement(p,null),n.a.createElement(N.d,null,n.a.createElement(N.b,{exact:!0,path:"/timeline",component:f}),n.a.createElement(N.b,{exact:!0,path:"/login",component:y}),n.a.createElement(N.b,{exact:!0,path:"/register",component:w}),n.a.createElement(N.b,{exact:!0,path:"/upload-post",component:j}),n.a.createElement(N.b,{exact:!0,path:"/favourites",component:S}),n.a.createElement(N.b,{exact:!0,path:"/my-posts",component:x}),n.a.createElement(N.a,{to:"/timeline"})),n.a.createElement(N.d,null))},k=a(13),I=a(36),T=a(37);const _={user:{userName:"",token:""},myPosts:[],favourites:[]},R={allPosts:[]},U=Object(k.combineReducers)({userState:(e=_,t)=>{switch(t.type){case"LOGIN_USER":return Object(c.a)(Object(c.a)({},e),{},{user:t.payload});case"SET_MY_POSTS":return Object(c.a)(Object(c.a)({},e),{},{myPosts:t.payload});case"SET_FAVOURITES":return Object(c.a)(Object(c.a)({},e),{},{favourites:t.payload});case"LOGOUT":return{user:{userName:"",token:""},myPosts:[],favourites:[]};default:return Object(c.a)({},e)}},timelineState:(e=R,t)=>{switch(t.type){case"SET_TIMELINE":return console.log(t.payload.allPublicPosts),Object(c.a)(Object(c.a)({},e),{},{allPosts:[...t.payload.allPublicPosts]});default:return Object(c.a)({},e)}}});let L=Object(k.createStore)(U,Object(T.composeWithDevTools)(Object(k.applyMiddleware)(I.a)));const C=document.getElementById("root");s.a.render(n.a.createElement(o.a,{store:L},n.a.createElement(i.a,null,n.a.createElement(P,null))),C)}},[[38,1,2]]]);
//# sourceMappingURL=main.17fb2bbd.chunk.js.map